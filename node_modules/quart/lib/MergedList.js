class MergedList {
  constructor() {
    this.lists = [];
  }

  add(list) {
    this.lists.push(list);
  }

  get(index) {
    if (index >= this.size) return null;
    const totalLists = this.lists.length;
    let cursor = 0;
    for (let i = 0; i < totalLists; i++) {
      if (!this.lists[i].length) continue;
      if (index <= (this.lists[i].length + cursor - 1)) {
        if (typeof this.lists[i].get === 'function') return this.lists[i].get(index - cursor);
        return this.lists[i][index - cursor];
      }
      cursor += this.lists[i].length;
    }
  }

  get size() {
    const totalLists = this.lists.length;
    let size = 0;
    for (let i = 0; i < totalLists; i++) {
      size += this.lists[i].length;
    }
    return size;
  }
}

module.exports = MergedList;