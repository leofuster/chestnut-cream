const os = require('os');
const fs = require('fs');
const path = require('path');
const crypto = require('crypto');

const temp_path = fs.mkdtempSync(path.resolve(os.tmpdir(), 'test_temp_files'));

module.exports = async (data) => {
  return new Promise((resolve, reject) => {
    const fileName = `quert_test_${crypto.randomBytes(32).toString('hex')}`;
    const filePath = path.resolve(temp_path, fileName);

    fs.writeFile(filePath, data, (error) => {
      if (error) return reject(error);
      resolve(filePath);
    });
  });
};