const http2 = require('http2');
const {
  HTTP2_HEADER_PATH,
  HTTP2_HEADER_METHOD,
  HTTP2_HEADER_STATUS
} = http2.constants;
const { get_single_resource } = require('../utils');

describe('Routing Integration Suite', function () {
  this.timeout(5000);
  it('should throw 404 when no routes are found', async () => {
    const { body, headers } = await get_single_resource(port, '/route_unknown');

    expect(headers).to.have.property(HTTP2_HEADER_STATUS, 404);
    expect(body).to.eql("Not found");
  });
});